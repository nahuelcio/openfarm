id: oneshot
name: One Shot
description: Direct execution without git operations - runs in current branch, no commits
abstract: false

parameters:
  provider:
    type: string
    required: false
    default: "opencode"
    description: Provider to use for code execution
  model:
    type: string
    required: false
    description: Model to use (optional, uses provider default if not set)

variables:
  worktreePath: ""

steps:
  - id: execute
    name: Execute Task
    type: code
    action: agent.code
    config:
      provider: "${provider}"
      model: "${model}"
      maxIterations: 5
    timeout: 600000
    retryCount: 1
    continueOnError: false
    prompt: |
      # Task

      ${task}

      ## Instructions

      You are an expert software engineer executing in ONESHOT mode.

      CRITICAL RULES:
      - NO git operations - work in the current branch/directory
      - NEVER ask clarifying questions - make reasonable assumptions and proceed
      - If information is missing, proceed with best effort
      - Complete the task with minimal, focused changes

      ## Context

      - Working directory: current (no worktree)
      - Mode: oneshot (direct execution, no commits)

      Execute the task now.
