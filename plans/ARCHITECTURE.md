# ğŸ—ï¸ Arquitectura del TUI

## Diagrama de Componentes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         App.tsx                             â”‚
â”‚                    (Entry Point)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚
           â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layout    â”‚    â”‚   Store     â”‚    â”‚  Keyboard   â”‚
â”‚  Component  â”‚    â”‚  (Zustand)  â”‚    â”‚   Hooks     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚              â”‚              â”‚           â”‚
       â–¼              â–¼              â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header  â”‚    â”‚ Sidebar  â”‚    â”‚  Main  â”‚  â”‚ Footer â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚               â”‚               â”‚
                    â–¼               â–¼               â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Dashboardâ”‚    â”‚ Execute  â”‚    â”‚ History  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚               â”‚               â”‚
                    â–¼               â–¼               â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Settings â”‚    â”‚Executing â”‚    â”‚ Detail   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Flujo de Datos

```
Usuario Input â†’ Pantalla â†’ Store â†’ OpenFarm SDK â†’ Executor
                                                  â”‚
                                                  â–¼
Logs â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  Store â†â”€â”€â”€ Execution Result
  â”‚
  â–¼
UI Update
```

## Estructura de Archivos

```
packages/sdk/src/tui/
â”œâ”€â”€ index.tsx              # Entry point
â”œâ”€â”€ App.tsx                # Root component
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ index.ts           # Zustand store
â”‚   â””â”€â”€ storage.ts         # Persistence
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Layout.tsx
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â””â”€â”€ Footer.tsx
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ Button.tsx
â”‚       â”œâ”€â”€ Input.tsx
â”‚       â”œâ”€â”€ Spinner.tsx
â”‚       â”œâ”€â”€ ProgressBar.tsx
â”‚       â””â”€â”€ Badge.tsx
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”œâ”€â”€ Execute.tsx
â”‚   â”œâ”€â”€ Executing.tsx
â”‚   â”œâ”€â”€ History.tsx
â”‚   â”œâ”€â”€ ExecutionDetail.tsx
â”‚   â””â”€â”€ Settings.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useExecution.ts
â”‚   â”œâ”€â”€ useExecutionWithRetry.ts
â”‚   â””â”€â”€ useKeyboard.ts
â”œâ”€â”€ theme/
â”‚   â”œâ”€â”€ colors.ts
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ styles.ts
â””â”€â”€ router/
    â””â”€â”€ index.ts
```

## Dependencias entre Pantallas

```
Dashboard
    â”‚
    â”œâ”€â”€â†’ Execute â†’ Executing â†’ ExecutionDetail
    â”‚                              â”‚
    â””â”€â”€â†’ History â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€â”€â†’ Settings
```

## State Management

```typescript
// Estado global manejado por Zustand
interface AppState {
  // ConfiguraciÃ³n
  config: OpenFarmConfig;
  
  // NavegaciÃ³n
  currentScreen: Screen;
  screenHistory: Screen[];
  
  // Ejecuciones
  executions: Execution[];
  currentExecution: Execution | null;
  
  // UI
  theme: 'dark' | 'light';
  sidebarOpen: boolean;
}
```

## IntegraciÃ³n con SDK

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TUI Screen    â”‚
â”‚   (Executing)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ useExecution()
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   OpenFarm      â”‚
â”‚    SDK          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ execute()
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Executor     â”‚
â”‚  (OpenCode/     â”‚
â”‚  Claude/etc)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
